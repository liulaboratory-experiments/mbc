<!DOCTYPE html>
<html>
  <head>
    <script src="jspsych/dist/jspsych.js"></script>
    <script src="jspsych/dist/plugin-instructions.js"></script>
    <script src="jspsych/dist/plugin-survey-html-form.js"></script>
    <script src="jspsych/dist/plugin-preload.js"></script>
    <script src="jspsych/dist/plugin-html-button-response.js"></script>
    <script src="jspsych/dist/plugin-html-slider-response.js"></script>
    <script src="https://unpkg.com/@jspsych-contrib/plugin-pipe"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
    <link rel="stylesheet" href="jspsych/dist/jspsych.css">
    <style>
      #quitButton {
        position: fixed;
        bottom: 10px;
        right: 10px;
        padding: 10px;
        background-color: white;
        color: black;
        border: 2px solid black;
        cursor: pointer;
        font-size: 16px;
      }
    </style>
  </head>
  <body></body>

  <button id="quitButton">Quit</button>

  <script>
    document.getElementById('quitButton').addEventListener('click', function() {
      jsPsych.abortExperiment('The participant chose to quit the experiment.');
    });

    var jsPsych = initJsPsych({
      default_iti: 250,
      on_finish: function() {
        window.location = "https://connect.cloudresearch.com/participant/project/478F668072/complete";
      },
      show_progress_bar: true
    });

    var preload = {
    type: jsPsychPreload,
    auto_preload: true
  };
      //-------------------------------------------------------------------------------------------------------------------------------------
  //experiment variables
  const mturk_pilot_mode = true
  const data_collection = true

    // capture info from mturk/connect, except in test mode
  if(mturk_pilot_mode) { 
    var study_id = 'pilot';
    var session_id = 'pilot';
     participant_id = 'pilot_' + String(jsPsych.randomization.randomID(10)) //overwrite the participant id
  } else {
    participant_id = jsPsych.data.getURLVariable('participantId'); 
    var assignment_id = jsPsych.data.getURLVariable('assignmentId');
    var project_id = jsPsych.data.getURLVariable('projectId');
  }

jsPsych.data.addProperties({
    mturk_participant_id: participant_id,
    mturk_assignment_id: assignment_id,
    mturk_project_id: project_id
  })

  const filename = `${participant_id}.csv`; //this needs to be assigned after running the ifelse statement
    //-------------------------------------------------------------------------------------------------------------------------------------
  
    // `df_pairs` is the javascriptified dataframe containing the 192 pairs from pilot
  var df_pairs =  [
  { itemA: "feel tired", itemB: "remember something", categoryA: "bio", categoryB: "cog" },
{ itemA: "feel pain", itemB: "jump up and down", categoryA: "bio", categoryB: "act" },
{ itemA: "think about something", itemB: "feel sick", categoryA: "cog", categoryB: "bio" },
{ itemA: "take a walk", itemB: "hear something", categoryA: "act", categoryB: "cog" },
{ itemA: "feel tired", itemB: "feel scared", categoryA: "bio", categoryB: "bio" },
{ itemA: "take a walk", itemB: "choose what to do", categoryA: "act", categoryB: "cog" },
{ itemA: "hear something", itemB: "sit down", categoryA: "cog", categoryB: "act" },
{ itemA: "sit down", itemB: "remember something", categoryA: "act", categoryB: "cog" },
{ itemA: "think about something", itemB: "kick something", categoryA: "cog", categoryB: "act" },
{ itemA: "feel hungry", itemB: "hear something", categoryA: "bio", categoryB: "cog" },
{ itemA: "see something", itemB: "feel pain", categoryA: "cog", categoryB: "bio" },
{ itemA: "feel scared", itemB: "feel hungry", categoryA: "bio", categoryB: "bio" },
{ itemA: "think about something", itemB: "take a walk", categoryA: "cog", categoryB: "act" },
{ itemA: "feel tired", itemB: "feel pain", categoryA: "bio", categoryB: "bio" },
{ itemA: "choose what to do", itemB: "take a walk", categoryA: "cog", categoryB: "act" },
{ itemA: "take a walk", itemB: "jump up and down", categoryA: "act", categoryB: "act" },
{ itemA: "feel scared", itemB: "choose what to do", categoryA: "bio", categoryB: "cog" },
{ itemA: "remember something", itemB: "hear something", categoryA: "cog", categoryB: "cog" },
{ itemA: "reach for something", itemB: "think about something", categoryA: "act", categoryB: "cog" },
{ itemA: "remember something", itemB: "feel hungry", categoryA: "cog", categoryB: "bio" },
{ itemA: "kick something", itemB: "feel hungry", categoryA: "act", categoryB: "bio" },
{ itemA: "feel scared", itemB: "feel sick", categoryA: "bio", categoryB: "bio" },
{ itemA: "feel sick", itemB: "feel scared", categoryA: "bio", categoryB: "bio" },
{ itemA: "feel tired", itemB: "choose what to do", categoryA: "bio", categoryB: "cog" },
{ itemA: "jump up and down", itemB: "kick something", categoryA: "act", categoryB: "act" },
{ itemA: "kick something", itemB: "choose what to do", categoryA: "act", categoryB: "cog" },
{ itemA: "take a walk", itemB: "feel tired", categoryA: "act", categoryB: "bio" },
{ itemA: "choose what to do", itemB: "kick something", categoryA: "cog", categoryB: "act" },
{ itemA: "think about something", itemB: "feel pain", categoryA: "cog", categoryB: "bio" },
{ itemA: "remember something", itemB: "feel tired", categoryA: "cog", categoryB: "bio" },
{ itemA: "sit down", itemB: "hear something", categoryA: "act", categoryB: "cog" },
{ itemA: "jump up and down", itemB: "remember something", categoryA: "act", categoryB: "cog" },
{ itemA: "sit down", itemB: "take a walk", categoryA: "act", categoryB: "act" },
{ itemA: "feel tired", itemB: "feel sick", categoryA: "bio", categoryB: "bio" },
{ itemA: "hear something", itemB: "take a walk", categoryA: "cog", categoryB: "act" },
{ itemA: "think about something", itemB: "remember something", categoryA: "cog", categoryB: "cog" },
{ itemA: "jump up and down", itemB: "feel tired", categoryA: "act", categoryB: "bio" },
{ itemA: "reach for something", itemB: "sit down", categoryA: "act", categoryB: "act" },
{ itemA: "hear something", itemB: "choose what to do", categoryA: "cog", categoryB: "cog" },
{ itemA: "remember something", itemB: "think about something", categoryA: "cog", categoryB: "cog" },
{ itemA: "take a walk", itemB: "see something", categoryA: "act", categoryB: "cog" },
{ itemA: "reach for something", itemB: "hear something", categoryA: "act", categoryB: "cog" },
{ itemA: "choose what to do", itemB: "feel scared", categoryA: "cog", categoryB: "bio" },
{ itemA: "hear something", itemB: "kick something", categoryA: "cog", categoryB: "act" },
{ itemA: "choose what to do", itemB: "sit down", categoryA: "cog", categoryB: "act" },
{ itemA: "see something", itemB: "feel hungry", categoryA: "cog", categoryB: "bio" },
{ itemA: "feel hungry", itemB: "feel scared", categoryA: "bio", categoryB: "bio" },
{ itemA: "think about something", itemB: "choose what to do", categoryA: "cog", categoryB: "cog" },
{ itemA: "choose what to do", itemB: "feel sick", categoryA: "cog", categoryB: "bio" },
{ itemA: "reach for something", itemB: "feel hungry", categoryA: "act", categoryB: "bio" },
{ itemA: "reach for something", itemB: "feel pain", categoryA: "act", categoryB: "bio" },
{ itemA: "jump up and down", itemB: "sit down", categoryA: "act", categoryB: "act" },
{ itemA: "sit down", itemB: "jump up and down", categoryA: "act", categoryB: "act" },
{ itemA: "sit down", itemB: "feel sick", categoryA: "act", categoryB: "bio" },
{ itemA: "feel pain", itemB: "feel scared", categoryA: "bio", categoryB: "bio" },
{ itemA: "feel pain", itemB: "feel tired", categoryA: "bio", categoryB: "bio" },
{ itemA: "feel sick", itemB: "remember something", categoryA: "bio", categoryB: "cog" },
{ itemA: "take a walk", itemB: "reach for something", categoryA: "act", categoryB: "act" },
{ itemA: "think about something", itemB: "feel tired", categoryA: "cog", categoryB: "bio" },
{ itemA: "feel hungry", itemB: "reach for something", categoryA: "bio", categoryB: "act" },
{ itemA: "choose what to do", itemB: "feel pain", categoryA: "cog", categoryB: "bio" },
{ itemA: "feel tired", itemB: "kick something", categoryA: "bio", categoryB: "act" },
{ itemA: "feel pain", itemB: "kick something", categoryA: "bio", categoryB: "act" },
{ itemA: "feel tired", itemB: "hear something", categoryA: "bio", categoryB: "cog" },
{ itemA: "jump up and down", itemB: "feel hungry", categoryA: "act", categoryB: "bio" },
{ itemA: "feel tired", itemB: "take a walk", categoryA: "bio", categoryB: "act" },
{ itemA: "feel sick", itemB: "feel pain", categoryA: "bio", categoryB: "bio" },
{ itemA: "see something", itemB: "feel scared", categoryA: "cog", categoryB: "bio" },
{ itemA: "feel pain", itemB: "hear something", categoryA: "bio", categoryB: "cog" },
{ itemA: "remember something", itemB: "feel pain", categoryA: "cog", categoryB: "bio" },
{ itemA: "think about something", itemB: "reach for something", categoryA: "cog", categoryB: "act" },
{ itemA: "jump up and down", itemB: "feel pain", categoryA: "act", categoryB: "bio" },
{ itemA: "feel pain", itemB: "feel hungry", categoryA: "bio", categoryB: "bio" },
{ itemA: "hear something", itemB: "remember something", categoryA: "cog", categoryB: "cog" },
{ itemA: "kick something", itemB: "feel scared", categoryA: "act", categoryB: "bio" },
{ itemA: "feel scared", itemB: "sit down", categoryA: "bio", categoryB: "act" },
{ itemA: "think about something", itemB: "feel scared", categoryA: "cog", categoryB: "bio" },
{ itemA: "feel scared", itemB: "remember something", categoryA: "bio", categoryB: "cog" },
{ itemA: "see something", itemB: "feel tired", categoryA: "cog", categoryB: "bio" },
{ itemA: "feel pain", itemB: "sit down", categoryA: "bio", categoryB: "act" },
{ itemA: "remember something", itemB: "take a walk", categoryA: "cog", categoryB: "act" },
{ itemA: "think about something", itemB: "jump up and down", categoryA: "cog", categoryB: "act" },
{ itemA: "hear something", itemB: "jump up and down", categoryA: "cog", categoryB: "act" },
{ itemA: "feel hungry", itemB: "feel pain", categoryA: "bio", categoryB: "bio" },
{ itemA: "kick something", itemB: "reach for something", categoryA: "act", categoryB: "act" },
{ itemA: "feel scared", itemB: "see something", categoryA: "bio", categoryB: "cog" },
{ itemA: "feel pain", itemB: "take a walk", categoryA: "bio", categoryB: "act" },
{ itemA: "see something", itemB: "hear something", categoryA: "cog", categoryB: "cog" },
{ itemA: "feel tired", itemB: "think about something", categoryA: "bio", categoryB: "cog" },
{ itemA: "feel scared", itemB: "feel pain", categoryA: "bio", categoryB: "bio" },
{ itemA: "feel sick", itemB: "reach for something", categoryA: "bio", categoryB: "act" },
{ itemA: "see something", itemB: "sit down", categoryA: "cog", categoryB: "act" },
{ itemA: "kick something", itemB: "sit down", categoryA: "act", categoryB: "act" },
{ itemA: "sit down", itemB: "feel tired", categoryA: "act", categoryB: "bio" },
{ itemA: "feel scared", itemB: "think about something", categoryA: "bio", categoryB: "cog" },
{ itemA: "feel tired", itemB: "reach for something", categoryA: "bio", categoryB: "act" },
{ itemA: "hear something", itemB: "feel hungry", categoryA: "cog", categoryB: "bio" },
{ itemA: "take a walk", itemB: "feel pain", categoryA: "act", categoryB: "bio" },
{ itemA: "remember something", itemB: "kick something", categoryA: "cog", categoryB: "act" },
{ itemA: "take a walk", itemB: "think about something", categoryA: "act", categoryB: "cog" },
{ itemA: "jump up and down", itemB: "feel sick", categoryA: "act", categoryB: "bio" },
{ itemA: "kick something", itemB: "take a walk", categoryA: "act", categoryB: "act" },
{ itemA: "feel pain", itemB: "reach for something", categoryA: "bio", categoryB: "act" },
{ itemA: "reach for something", itemB: "feel sick", categoryA: "act", categoryB: "bio" },
{ itemA: "jump up and down", itemB: "think about something", categoryA: "act", categoryB: "cog" },
{ itemA: "remember something", itemB: "feel scared", categoryA: "cog", categoryB: "bio" },
{ itemA: "reach for something", itemB: "kick something", categoryA: "act", categoryB: "act" },
{ itemA: "feel sick", itemB: "take a walk", categoryA: "bio", categoryB: "act" },
{ itemA: "take a walk", itemB: "feel sick", categoryA: "act", categoryB: "bio" },
{ itemA: "see something", itemB: "jump up and down", categoryA: "cog", categoryB: "act" },
{ itemA: "feel sick", itemB: "see something", categoryA: "bio", categoryB: "cog" },
{ itemA: "hear something", itemB: "see something", categoryA: "cog", categoryB: "cog" },
{ itemA: "feel pain", itemB: "choose what to do", categoryA: "bio", categoryB: "cog" },
{ itemA: "feel sick", itemB: "sit down", categoryA: "bio", categoryB: "act" },
{ itemA: "feel tired", itemB: "see something", categoryA: "bio", categoryB: "cog" },
{ itemA: "kick something", itemB: "feel tired", categoryA: "act", categoryB: "bio" },
{ itemA: "feel hungry", itemB: "feel tired", categoryA: "bio", categoryB: "bio" },
{ itemA: "feel pain", itemB: "remember something", categoryA: "bio", categoryB: "cog" },
{ itemA: "kick something", itemB: "remember something", categoryA: "act", categoryB: "cog" },
{ itemA: "sit down", itemB: "see something", categoryA: "act", categoryB: "cog" },
{ itemA: "feel pain", itemB: "think about something", categoryA: "bio", categoryB: "cog" },
{ itemA: "feel scared", itemB: "hear something", categoryA: "bio", categoryB: "cog" },
{ itemA: "take a walk", itemB: "feel scared", categoryA: "act", categoryB: "bio" },
{ itemA: "feel scared", itemB: "take a walk", categoryA: "bio", categoryB: "act" },
{ itemA: "feel hungry", itemB: "jump up and down", categoryA: "bio", categoryB: "act" },
{ itemA: "kick something", itemB: "see something", categoryA: "act", categoryB: "cog" },
{ itemA: "feel pain", itemB: "feel sick", categoryA: "bio", categoryB: "bio" },
{ itemA: "choose what to do", itemB: "jump up and down", categoryA: "cog", categoryB: "act" },
{ itemA: "feel sick", itemB: "feel tired", categoryA: "bio", categoryB: "bio" },
{ itemA: "feel hungry", itemB: "think about something", categoryA: "bio", categoryB: "cog" },
{ itemA: "sit down", itemB: "reach for something", categoryA: "act", categoryB: "act" },
{ itemA: "remember something", itemB: "jump up and down", categoryA: "cog", categoryB: "act" },
{ itemA: "feel scared", itemB: "jump up and down", categoryA: "bio", categoryB: "act" },
{ itemA: "feel sick", itemB: "feel hungry", categoryA: "bio", categoryB: "bio" },
{ itemA: "feel pain", itemB: "see something", categoryA: "bio", categoryB: "cog" },
{ itemA: "feel hungry", itemB: "remember something", categoryA: "bio", categoryB: "cog" },
{ itemA: "choose what to do", itemB: "think about something", categoryA: "cog", categoryB: "cog" },
{ itemA: "see something", itemB: "choose what to do", categoryA: "cog", categoryB: "cog" },
{ itemA: "sit down", itemB: "feel hungry", categoryA: "act", categoryB: "bio" },
{ itemA: "choose what to do", itemB: "remember something", categoryA: "cog", categoryB: "cog" },
{ itemA: "jump up and down", itemB: "see something", categoryA: "act", categoryB: "cog" },
{ itemA: "kick something", itemB: "hear something", categoryA: "act", categoryB: "cog" },
{ itemA: "feel sick", itemB: "jump up and down", categoryA: "bio", categoryB: "act" },
{ itemA: "take a walk", itemB: "sit down", categoryA: "act", categoryB: "act" },
{ itemA: "feel sick", itemB: "think about something", categoryA: "bio", categoryB: "cog" },
{ itemA: "remember something", itemB: "feel sick", categoryA: "cog", categoryB: "bio" },
{ itemA: "see something", itemB: "kick something", categoryA: "cog", categoryB: "act" },
{ itemA: "choose what to do", itemB: "feel hungry", categoryA: "cog", categoryB: "bio" },
{ itemA: "hear something", itemB: "think about something", categoryA: "cog", categoryB: "cog" },
{ itemA: "sit down", itemB: "kick something", categoryA: "act", categoryB: "act" },
{ itemA: "think about something", itemB: "hear something", categoryA: "cog", categoryB: "cog" },
{ itemA: "choose what to do", itemB: "hear something", categoryA: "cog", categoryB: "cog" },
{ itemA: "choose what to do", itemB: "reach for something", categoryA: "cog", categoryB: "act" },
{ itemA: "feel tired", itemB: "sit down", categoryA: "bio", categoryB: "act" },
{ itemA: "remember something", itemB: "see something", categoryA: "cog", categoryB: "cog" },
{ itemA: "reach for something", itemB: "take a walk", categoryA: "act", categoryB: "act" },
{ itemA: "kick something", itemB: "jump up and down", categoryA: "act", categoryB: "act" },
{ itemA: "see something", itemB: "take a walk", categoryA: "cog", categoryB: "act" },
{ itemA: "take a walk", itemB: "kick something", categoryA: "act", categoryB: "act" },
{ itemA: "hear something", itemB: "feel tired", categoryA: "cog", categoryB: "bio" },
{ itemA: "feel tired", itemB: "feel hungry", categoryA: "bio", categoryB: "bio" },
{ itemA: "feel scared", itemB: "kick something", categoryA: "bio", categoryB: "act" },
{ itemA: "jump up and down", itemB: "feel scared", categoryA: "act", categoryB: "bio" },
{ itemA: "feel hungry", itemB: "feel sick", categoryA: "bio", categoryB: "bio" },
{ itemA: "jump up and down", itemB: "reach for something", categoryA: "act", categoryB: "act" },
{ itemA: "kick something", itemB: "think about something", categoryA: "act", categoryB: "cog" },
{ itemA: "feel hungry", itemB: "see something", categoryA: "bio", categoryB: "cog" },
{ itemA: "jump up and down", itemB: "take a walk", categoryA: "act", categoryB: "act" },
{ itemA: "sit down", itemB: "feel pain", categoryA: "act", categoryB: "bio" },
{ itemA: "remember something", itemB: "reach for something", categoryA: "cog", categoryB: "act" },
{ itemA: "hear something", itemB: "feel pain", categoryA: "cog", categoryB: "bio" },
{ itemA: "hear something", itemB: "reach for something", categoryA: "cog", categoryB: "act" },
{ itemA: "remember something", itemB: "sit down", categoryA: "cog", categoryB: "act" },
{ itemA: "reach for something", itemB: "feel tired", categoryA: "act", categoryB: "bio" },
{ itemA: "feel hungry", itemB: "choose what to do", categoryA: "bio", categoryB: "cog" },
{ itemA: "sit down", itemB: "think about something", categoryA: "act", categoryB: "cog" },
{ itemA: "feel hungry", itemB: "take a walk", categoryA: "bio", categoryB: "act" },
{ itemA: "feel scared", itemB: "reach for something", categoryA: "bio", categoryB: "act" },
{ itemA: "jump up and down", itemB: "choose what to do", categoryA: "act", categoryB: "cog" },
{ itemA: "sit down", itemB: "choose what to do", categoryA: "act", categoryB: "cog" },
{ itemA: "see something", itemB: "reach for something", categoryA: "cog", categoryB: "act" },
{ itemA: "choose what to do", itemB: "feel tired", categoryA: "cog", categoryB: "bio" },
{ itemA: "reach for something", itemB: "choose what to do", categoryA: "act", categoryB: "cog" },
{ itemA: "reach for something", itemB: "remember something", categoryA: "act", categoryB: "cog" },
{ itemA: "hear something", itemB: "feel scared", categoryA: "cog", categoryB: "bio" },
{ itemA: "kick something", itemB: "feel pain", categoryA: "act", categoryB: "bio" },
{ itemA: "feel sick", itemB: "kick something", categoryA: "bio", categoryB: "act" },
{ itemA: "hear something", itemB: "feel sick", categoryA: "cog", categoryB: "bio" },
{ itemA: "see something", itemB: "feel sick", categoryA: "cog", categoryB: "bio" },
{ itemA: "take a walk", itemB: "feel hungry", categoryA: "act", categoryB: "bio" },
{ itemA: "reach for something", itemB: "see something", categoryA: "act", categoryB: "cog" },
{ itemA: "think about something", itemB: "feel hungry", categoryA: "cog", categoryB: "bio" },
{ itemA: "choose what to do", itemB: "see something", categoryA: "cog", categoryB: "cog" },
  ]

 

// Divide pairs into 4 conditions with 48 pairs each
function createConditions(pairs, numConditions) {
  var conditions = [];
  for (var i = 0; i < numConditions; i++) {
    var conditionPairs = pairs.slice(i * 48, (i + 1) * 48);
    conditions.push(conditionPairs);
  }
  return conditions;
}

// Create 4 conditions
var conditions = createConditions(df_pairs, 4);

// Assign participant to a random condition and shuffle pairs
function assignToCondition(conditions) {
  var randomConditionIndex = Math.floor(Math.random() * conditions.length);
  var assignedCondition = conditions[randomConditionIndex];
  return jsPsych.randomization.shuffle(assignedCondition);
}

// Assign participant to a condition
var participantPairs = assignToCondition(conditions);

var slider_labels = ['Not at all similar', 'Maybe not similar', 'Unsure', 'Maybe similar', 'Definitely similar']
var slider_widths = 1000

// Create the attention checks
var attentionCheck1 = {
  type: jsPsychHtmlSliderResponse,
  stimulus: `<p style="font-size: 32px;">This is a&nbsp;&nbsp;<strong>check.</strong>&nbsp;&nbsp;Please move the slider all the way to the&nbsp;&nbsp;<strong>left</strong></p>`,
  labels: slider_labels,
  slider_width: slider_widths,
  require_movement: true,
  data: { trial_id: 'attention_check_1' },
  on_finish: function(data) {
    data.correct = data.response === 0; // Check if the response was all the way to the left
  }
};

var attentionCheck2 = {
  type: jsPsychHtmlSliderResponse,
  stimulus: `<p style="font-size: 32px;">This is a&nbsp;&nbsp;<strong>check.</strong>&nbsp;&nbsp;Please move slider to&nbsp;&nbsp;<strong>'Maybe yes'</strong></p>`,
  labels: slider_labels,
  slider_width: 1000,
  require_movement: true,
  data: { trial_id: 'attention_check_2' },
  on_finish: function(data) {
    data.correct = data.response === 75; // Check if "Maybe yes" was selected
  }
};

var attentionCheck3 = {
  type: jsPsychHtmlSliderResponse,
  stimulus: `<p style="font-size: 32px;">This is a&nbsp;&nbsp;<strong>check.</strong>&nbsp;&nbsp;Please move slider all the way to the&nbsp;&nbsp;<strong>right</strong></p>`,
  labels: slider_labels,
  slider_width: 1000,
  require_movement: true,
  data: { trial_id: 'attention_check_3' },
  on_finish: function(data) {
    data.correct = data.response === 100; // Check if the response was all the way to the right
  }
};

// Insert attention checks at trials 16, 32, and 48
function insertAttentionChecks(trials) {
  trials.splice(15, 0, attentionCheck1);  // Insert check 1 at trial 16 (index 15)
  trials.splice(31, 0, attentionCheck2);  // Insert check 2 at trial 32 (index 31)
  trials.splice(47, 0, attentionCheck3);  // Insert check 3 at trial 48 (index 47)
  return trials;
}

function convertToPastTense(item) {
      if (item === "feel hungry") return "felt hungry";
      if (item === "reach for something") return "reached for something";
      if (item === "remember something") return "remembered something";
      if (item === "hear something") return "heard something";
      if (item === "kick something") return "kicked something";
      if (item === "sit down") return "sat down";
      if (item === "see something") return "saw something";
      if (item === "take a walk") return "took a walk";
      if (item === "jump up and down") return "jumped up and down";
      if (item.startsWith("choose")) return "chose what to do";
      if (item.startsWith("feel")) return "felt " + item.slice(5);
      if (item.startsWith("think")) return "thought about something";
      return item;
    }

    function addIng(item) {
      if (item === "think about something") return "thinking about something";
      if (item === "reach for something") return "reaching for something";
      if (item === "kick something") return "kicking something";
      if (item === "remember something") return "remembering something";
      if (item === "feel hungry") return "feeling hungry";
      if (item === "hear something") return "hearing something";
      if (item === "sit down") return "sitting down";
      if (item === "see something") return "seeing something";
      if (item === "take a walk") return "taking a walk";
      if (item === "jump up and down") return "jumping up and down";
      if (item.startsWith("choose")) return "choosing what to do";
      if (item.startsWith("feel")) return "feeling " + item.slice(5);
      return item;
    }


var trials = participantPairs.map(function(pair, index) {
      var itemA_past = convertToPastTense(pair.itemA);
      var itemB_past = convertToPastTense(pair.itemB);
      var itemA_withIng = addIng(pair.itemA);
      var itemB_withIng = addIng(pair.itemB);


      return {
        type: jsPsychHtmlSliderResponse,
        stimulus: `<p style="font-size: 32px;">First, Sarah <strong>${itemA_past}</strong>.
                   <span style="font-size: 32px">Then, she <strong>${itemB_past}</strong>.</span></p>
                   <p><span style="font-size:32px">Do you think that <strong>${itemA_withIng}</strong> and <strong>${itemB_withIng}</strong> <br>are similar events to each other, or not at all?</span></p>`,
        labels: slider_labels,
        slider_width: slider_widths,
        require_movement: true,
        data: {
          trial_id: 'similarity_trial_' + (index + 1),
          itemA: pair.itemA,
          itemB: pair.itemB,
          categoryA: pair.categoryA,
          categoryB: pair.categoryB
        }
      };
    });

// Insert attention checks into the trials
trials = insertAttentionChecks(trials);

jsPsych.run([preload, trials])

  </script>
</html>