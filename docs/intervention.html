<!DOCTYPE html>
<html>
  <head>
    <script src="https://unpkg.com/jspsych"></script>
    <script src="jspsych/dist/plugin-preload.js"></script>
    <script src="jspsych/dist/plugin-instructions.js"></script>
    <script src="jspsych/dist/plugin-html-button-response.js"></script>
    <link href="https://unpkg.com/jspsych/css/jspsych.css" rel="stylesheet" type="text/css">
  </head>
  <body></body>
  <script>
    var jsPsych = initJsPsych({
      on_finish: function() {
        jsPsych.data.displayData();
      }
    });

    // Preload step
    var preload = {
      type: jsPsychPreload,
      auto_preload: true
    };

    var instructions = {
      type: jsPsychInstructions,
      pages: [
        '<div style="font-size: 22px; text-align: center;">' +
        '<br>Welcome! <br>In this game you will be asked to imagine what you would do ' +
        'in different scenarios. <br>Your task is to select the action you think would ' +
        'most likely bring about the given outcome. <br>' +
        'When youâ€™re ready, click "Next" to start.</div>'
      ],
      show_clickable_nav: true
    };

    // Define the item lists
    var causal_itemA = [
      "take a walk", "take a walk", "feel scared", "feel scared", "feel scared",
      "see something", "get tired", "see something", "feel scared", "think about something",
      "jump up and down", "take a walk", "hear something", "kick something", "jump up and down"
    ];
    var similarity_itemA = [
      "hear something", "see something", "remember something", "think about something", "remember something",
      "jump up and down", "jump up and down", "take a walk", "jump up and down", "jump up and down",
      "become hungry", "get tired", "experience pain", "get sick", "experience pain"
    ];
    var itemB = [
      "see something", "hear something", "choose what to do", "remember something", "think about something", 
      "reach for something", "sit down", "jump up and down", "kick something", "take a walk",
      "get tired", "become hungry", "feel scared", "experience pain", "get sick"
    ];

    // Combine items into a single array of objects
    var combined_items = [];
    for (var i = 0; i < itemB.length; i++) {
      combined_items.push({
        itemB: itemB[i],
        causal_itemA: causal_itemA[i],
        similarity_itemA: similarity_itemA[i]
      });
    }

    // Shuffle the combined array
    combined_items = jsPsych.randomization.shuffle(combined_items);

    // Create trials based on the shuffled combined array
    var trials = combined_items.map(function(item) {
      // Define the choices and shuffle them
      var choices = [
        `<p style="font-size: 20px;">I would make them <strong>${item.causal_itemA}</strong></p>`,
        `<p style="font-size: 20px;">I would make them <strong>${item.similarity_itemA}</strong></p>`
      ];
      choices = jsPsych.randomization.shuffle(choices);

      return {
        type: jsPsychHtmlButtonResponse,
        stimulus: `<p style="font-size: 25px;">Which of these actions would you do to make someone <strong>${item.itemB}</strong>?</p>`,
        choices: choices,
        button_layout: "flex"
      };
    });

    // Define the timeline
    const timeline = [
      preload, 
      instructions,
      ...trials
    ];

    // Run the experiment
    jsPsych.run(timeline);
  </script>
</html>