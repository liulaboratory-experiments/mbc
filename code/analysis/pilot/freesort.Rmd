---
title: "mbc-freesort"
output: html_document
date: "2024-11-12"
---

```{r setup, include=FALSE}
# Load necessary libraries
library(jsonlite)
library(dplyr)

# Your JSON data
json_data <- '[{"src":"images/items-circles-cropped/img6.png","x":610.4166666666667,"y":0},{"src":"images/items-circles-cropped/img9.png","x":-60.41666666666666,"y":550},{"src":"images/items-circles-cropped/img5.png","x":610.4166666666667,"y":183.33333333333334},{"src":"images/items-circles-cropped/img7.png","x":-60.41666666666666,"y":366.6666666666667},{"src":"images/items-circles-cropped/img11.png","x":610.4166666666667,"y":366.6666666666667},{"src":"images/items-circles-cropped/img8.png","x":-60.41666666666666,"y":183.33333333333334},{"src":"images/items-circles-cropped/img15.png","x":610.4166666666667,"y":550},{"src":"images/items-circles-cropped/img14.png","x":-60.41666666666666,"y":0},{"src":"images/items-circles-cropped/img10.png","x":793.75,"y":0},{"src":"images/items-circles-cropped/img3.png","x":-243.75,"y":550},{"src":"images/items-circles-cropped/img13.png","x":793.75,"y":183.33333333333334},{"src":"images/items-circles-cropped/img2.png","x":-243.75,"y":366.6666666666667},{"src":"images/items-circles-cropped/img4.png","x":793.75,"y":366.6666666666667},{"src":"images/items-circles-cropped/img1.png","x":-243.75,"y":183.33333333333334},{"src":"images/items-circles-cropped/img12.png","x":793.75,"y":550}]'

# Parse the JSON data into a data frame
data <- fromJSON(json_data)


# Create a named vector for the mappings
items <- c("choose what to do", "reach for something", "feel scared", 
                      "experience pain", "get sick", "get tired", "become hungry", 
                      "see something", "think about something", "hear something", 
                      "remember something", "jump up and down", "kick something", 
                      "take a walk", "sit down")


# Add the new column by extracting the number from src and mapping to descriptions
data <- data %>% 
  mutate(img_number = as.numeric(str_extract(src, "\\d+")),
         items = items[img_number])


# Calculate Euclidean distances between all pairs
dist_matrix <- dist(data[, c("x", "y")], method = "euclidean")

# Convert the distance object to a data frame for easier viewing
dist_df <- as.data.frame(as.matrix(dist_matrix))
rownames(dist_df) <- data$items
colnames(dist_df) <- data$items

# Display the distance matrix
dist_df


# Load necessary library
library(corrplot)

# Define the desired order of items
desired_order <- c("see something", "hear something", "choose what to do", 
                   "remember something", "think about something", "reach for something", 
                   "sit down", "jump up and down", "kick something", "take a walk", 
                   "get tired", "become hungry", "feel scared", "experience pain", "get sick")

# Normalize distances to be between 0 and 1
max_distance <- max(dist_df)  # Get the maximum distance
dist_df_normalized <- dist_df / max_distance  # Normalize to range [0, 1]

# Reorder the normalized distance matrix based on the desired order
dist_df_ordered <- dist_df_normalized[desired_order, desired_order]

# Plot the reordered and normalized distance matrix
corrplot(as.matrix(dist_df_ordered), 
         method = "color", 
         tl.col = "black", 
         is.corr = FALSE,  # This is not a correlation matrix
         title = "Normalized Euclidean Distance Matrix for Items (Ordered)",
         addgrid.col = "darkgray")
```

```{r}

# Load corrplot
library(corrplot)

# Plot the distance matrix
corrplot(as.matrix(dist_df), 
         method = "color", 
         tl.col = "black", 
         is.corr = FALSE,  # Set to FALSE because this is not a correlation matrix
         title = "Euclidean Distance Matrix for Items",
         addgrid.col = "darkgray",
         cl.lim = c(min(dist_df), max(dist_df)))  # Scale color limits based on the min and max distances
```


